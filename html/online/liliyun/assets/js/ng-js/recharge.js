var app=angular.module("app",["ngFilter"]);app.controller("Recharge",["$scope","$rootScope","$filter",function(e,a,t){function i(a){var t={url:config.basePath+"payHistory/query",data:{pageNo:a,pageSize:parseInt(e.pageSize),startTime:e.startTime,endTime:e.endTime,userType:e.usertype}};return t.data[e.searchType]=e.search,t}e.defaultPage=location.hash.substring(2)||1,e.pageSize=10,e.startTime="",e.endTime="",e.usertype="",e.phoneNum="",e.searchType="phoneNum",e.search="",e.getDataList=function(){var a=i(e.defaultPage);$.AJAX({type:"get",url:a.url,data:a.data,success:function(a){var t=getListData(a);e.total=t.total,e.datas=t.dataList,e.$apply(),topLongText(),new Page({parent:$("#copot-page"),nowPage:e.defaultPage,pageSize:e.pageSize,totalCount:t.total})}})},e.getDataList(),window.onhashchange=function(){win.showLoading(),e.defaultPage=location.hash.substring(2)||1,e.getDataList()},e.getDataForTime=function(a,i){switch($(a.target).addClass("active").siblings().removeClass("active"),i){case"all":e.startTime=e.endTime="";break;case"0":e.startTime=t("date")((new Date).getTime()-6048e5,"yyyy-MM-dd"),e.endTime=t("date")((new Date).getTime(),"yyyy-MM-dd");break;case"1":e.startTime=t("date")((new Date).getTime()-1296e6,"yyyy-MM-dd"),e.endTime=t("date")((new Date).getTime(),"yyyy-MM-dd")}e.defaultPage=1,win.showLoading(),e.getDataList()},$("#reservation").daterangepicker({format:"YYYY/MM/DD"},function(a,i,n){e.startTime=e.endTime="",e.startTime=t("date")(a.toISOString(),"yyyy-MM-dd"),e.endTime=t("date")(i.toISOString(),"yyyy-MM-dd"),e.defaultPage=1,win.showLoading(),e.getDataList(),e.$apply()}),e.userType=function(a,t){$(a.target).addClass("active").siblings().removeClass("active"),win.showLoading(),e.defaultPage=1,e.usertype=t,e.getDataList()},e.getDataForPage=function(){win.showLoading(),e.defaultPage=1,e.getDataList()},e.getDataForSearch=function(){win.showLoading(),e.defaultPage=1,e.getDataList()},e.rechargeDataExport=function(){dataExportForIframe({getSearchs:i(e.defaultPage).data,total:e.total,url:"order/export-excel"})}}]);