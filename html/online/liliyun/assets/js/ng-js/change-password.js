var app=angular.module("app",[]);app.controller("ChangePassword",["$scope",function(s){s.oldPassword="",s.isoldPassword="",s.newPassword="",s.isnewPassword="",s.confirmPassword="",s.isconfirmPassword="",s.username=localStorage.getItem("lili-username"),s.checkOldPassWord=function(){$.AJAX({url:config.basePath+"user/verify-password",data:{password:s.oldPassword},code:!0,success:function(o){s.isoldPassword=0,s.$apply()},error:function(o){s.isoldPassword="输入密码有误",s.$apply()}})},s.checkNewPassWord=function(){regCombination("special",[6,16]).test(s.newPassword)?s.isnewPassword=0:s.isnewPassword="请输入6-16位数的密码"},s.checkShrePassWord=function(){return regCombination("special",[6,16]).test(s.confirmPassword)?void(s.newPassword!==s.confirmPassword||""==s.confirmPassword?s.isconfirmPassword="两次密码输入不一致":s.isconfirmPassword=0):(s.isconfirmPassword="请输入6-16位数的密码",!1)},s.submitChangePassword=function(){return regCombination("*").test(s.oldPassword)?regCombination("*").test(s.newPassword)?regCombination("*").test(s.confirmPassword)?s.confirmPassword!=s.newPassword?(s.isconfirmPassword="两次密码输入不一致",!1):void $.AJAX({url:config.basePath+"user/update-password",data:{password:s.newPassword},success:function(s){Layer.miss({width:250,height:90,title:"修改密码成功",closeMask:!0}),loginOut()}}):(s.isconfirmPassword="请填写确认密码",!1):(s.isnewPassword="请输入6-请填写新密码",!1):(s.isoldPassword="请填写原始密码",!1)}}]);