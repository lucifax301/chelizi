var app=angular.module("app",["ngFilter","ngSelects"]);app.controller("historyPayment",["$scope","$rootScope","$filter","Selects",function(a,t,e,o){function i(t){var e={url:config.basePath+"enrollOrder/payQuery",data:{pageNo:t,pageSize:parseInt(a.pageSize),schoolNo:a.schoolNo,startTime:a.startTime,endTime:a.endTime,orderId:a.orderId}};return e.data[a.searchType]=a.search,e}a.defaultPage=location.hash.substring(2)||1,a.pageSize=10,a.search="",a.startTime="",a.endTime="",a.searchType="orderId",a.schoolNo="",a.cityId="",a.cityError=!1,a.applystateTotal=",",a.statusId="",a.orderId="",a.data={pages:10,total:100,pageSize:10,pageNo:1,dataList:[{studentId:0,name:"小张",sex:0,applyexam:4,applystate:1,phoneNum:"13476002586",applyCarType:1,coach:"张教练",idNumber:"422802198910116575",drivingSchool:"深港",accountStatus:0},{studentId:2,name:"小张",sex:1,applyexam:7,applystate:100,phoneNum:"13476002586",applyCarType:2,coach:"张教练",idNumber:"422802198910116575",drivingSchool:"深港",accountStatus:0}]},a.datas=a.data.dataList,o.selects({datas:a.datas,whichId:"orderId"}),a.getDataList=function(){var t=i(a.defaultPage);$.AJAX({type:"get",url:t.url,data:t.data,success:function(t){var e=getListData(t);a.total=e.total,a.datas=e.dataList,o.selects({datas:a.datas,whichId:"orderId"}),a.$apply(),topLongText(),new Page({parent:$("#copot-page"),nowPage:a.defaultPage,pageSize:a.pageSize,totalCount:e.total})}})},a.getDataList(),window.onhashchange=function(){win.showLoading(),a.defaultPage=location.hash.substring(2)||1,a.getDataList()},queryCity({callback:function(t){a.citys=t,a.$apply()}}),a.getSchools=function(){a.cityId?(a.checkHaveCity(),$("#select-school li").last().addClass("active").siblings().removeClass("active"),querySchool({cityId:a.cityId,callback:function(t){a.schools=t,a.$apply()}})):($("#select-school li").first().addClass("active").siblings().removeClass("active"),a.schoolNo="",a.schools="")},a.checkHaveCity=function(){a.cityError=!a.cityId},a.getDataForDistSchool=function(t,e){$(t.target).addClass("active").siblings().removeClass("active"),win.showLoading(),a.schoolType=e,a.defaultPage=1,a.schoolNo="",a.cityId="",a.getDataList()},a.getDataForSchool=function(){win.showLoading(),a.defaultPage=1,a.schoolType=2,a.getDataList()},a.getDataForTime=function(t,o){switch($(t.target).addClass("active").siblings().removeClass("active"),o){case"all":a.startTime=a.endTime="";break;case"0":a.startTime=e("date")((new Date).getTime()-6048e5,"yyyy-MM-dd"),a.endTime=e("date")((new Date).getTime(),"yyyy-MM-dd");break;case"1":a.startTime=e("date")((new Date).getTime()-1296e6,"yyyy-MM-dd"),a.endTime=e("date")((new Date).getTime(),"yyyy-MM-dd")}a.defaultPage=1,win.showLoading(),a.getDataList()},$("#reservation").daterangepicker({format:"YYYY/MM/DD"},function(t,o,i){a.startTime=a.endTime="",a.startTime=e("date")(t.toISOString(),"yyyy-MM-dd"),a.endTime=e("date")(o.toISOString(),"yyyy-MM-dd"),a.defaultPage=1,win.showLoading(),a.getDataList(),a.$apply()}),a.studentStatesList=studentStatesListForLiLi,a.getDataForPage=function(){win.showLoading(),a.defaultPage=1,a.getDataList()},a.getDataForSearch=function(){win.showLoading(),a.defaultPage=1,a.checkAllTag.search=a.search,a.getDataList()},a.checkAllTag={},a.objElement={},a.orderDataExport=function(){dataExportForIframe({getSearchs:i(a.defaultPage).data,total:a.total,url:"enrollOrder/payDownLoadExl"})}}]);