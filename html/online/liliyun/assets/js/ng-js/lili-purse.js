var app=angular.module("app",["ngFilter"]);app.controller("purse",["$scope",function(e){var t=[],o=new Date,n=o.getFullYear(),a=("0"+(o.getMonth()+1)).slice(-2),l=("0"+(o.getDate()+1)).slice(-2);e.startTime=n+"-"+a+"-01 00:00:00",e.endTime=n+"-"+a+"-"+l+" 23:59:59",e.thismonth=a,e.month=n+a;for(var s=2015;n>=s;s++)t.push(s);$("#monthpicker").monthpicker({years:t.reverse(),onMonthSelect:function(t,o){var n=("0"+(t+1)).slice(-2),a=o;e.month=a+n,e.getAccountData()}}),e.getAccountData=function(){$.AJAX({type:"get",url:config.basePath+"liliWallet/fundCount",data:{month:e.month},success:function(t){e.income=JSON.parse(t.result.income),e.expense=JSON.parse(t.result.expense),e.profitLoss=JSON.parse(t.result.profitLoss),e.$apply()}})},e.getAccountData(),$.AJAX({type:"get",url:config.basePath+"liliWallet/balance",success:function(t){console.log(t),e.liliMoney=JSON.parse(t.result.liliMoney),e.liliPer=t.result.liliPer,e.studentMoney=JSON.parse(t.result.studentMoney),e.studentPer=t.result.studentPer,e.schoolMoney=JSON.parse(t.result.schoolMoney),e.schoolPer=t.result.schoolPer,e.coachMoney=JSON.parse(t.result.coachMoney),e.coachPer=t.result.coachPer,e.totalMoney=JSON.parse(t.result.totalMoney);var o=echarts.init(document.getElementById("mainA"));option={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"所占比例",type:"pie",radius:["70%","90%"],label:{normal:{show:!1,position:"center"}},data:[{value:e.liliMoney/100,name:"喱喱余额"},{value:e.studentMoney/100,name:"学员总余额"},{value:e.schoolMoney/100,name:"驾校总余额"},{value:e.coachMoney/100,name:"教练总余额"}]}]},o.setOption(option),e.$apply()}})}]);