var app=angular.module("app",["ngFilter"]);app.controller("signUpPackEdit",["$scope","$compile","$filter",function(t,e,a){t.defaultPage=location.hash.substring(2)||1,t.ttid=getQueryString("ttid"),t.editData={},t.priceDetailFormat="",t.testConditionFormat="",t.examProfileFormat="",t.describtionLocal="",t.describtionStrange="",t.describtionHK="",t.describtionArmy="",t.tmpcoursepriceFormat={c1:{base:"",drive:""},c2:{base:"",drive:""}},t.tmpcourseFormat={course2:"",course3:""},t.tmpstandardFormat="",t.tmpserviceFormat="",$.AJAX({type:"get",url:config.basePath+"school/queryCity",data:{rlevel:2,pid:""},success:function(e){t.citys=JSON.parse(e.result.pageData)}}),$.AJAX({type:"get",url:config.basePath+"ept/view",async:!1,timeout:1e6,data:{ttid:t.ttid},success:function(e){t.editData=JSON.parse(e.result.pageData);var a=t.editData.priceDetail.split("+");t.priceDetailArrData=[];for(var i=0;i<a.length;i++){var r=a[i].split("=");t.priceDetailArrData.push(r),a[i]='<p><span class="z-fl">'+r[0]+'</span><span class="z-fr">'+r[1]+"元</span></p>",t.priceDetailFormat+=a[i]}for(var o=t.editData.testCondition.split("+"),i=0;i<o.length;i++)t.testConditionFormat+="<li>"+o[i]+"</li>";for(var c=t.editData.describtion.match(/本地居民\+(\S+)\+外地居民\+/),s=c[1].split("+"),i=0;i<s.length;i++)t.describtionLocal+="<li>"+s[i]+"</li>";for(var l=t.editData.describtion.match(/外地居民\+(\S+)\+港澳台\+/),p=l[1].split("+"),i=0;i<p.length;i++)t.describtionStrange+="<li>"+p[i]+"</li>";for(var n=t.editData.describtion.match(/港澳台\+(\S+)\+现役军人\+/),d=n[1].split("+"),i=0;i<d.length;i++)t.describtionHK+="<li>"+d[i]+"</li>";for(var m=t.editData.describtion.match(/现役军人\+(\S+)/),u=m[1].split("+"),i=0;i<u.length;i++)t.describtionArmy+="<li>"+u[i]+"</li>";var g=t.editData.tmpcourse.split("+");t.tmpcourseFormat.course2=g[0],t.tmpcourseFormat.course3=g[1];var v=t.editData.tmpcourseprice.match(/应试训练\=C1\:(\S+?)\=C2\:/),f=t.editData.tmpcourseprice.match(/陪驾\=C1\:(\S+?)\=C2\:/),h=t.editData.tmpcourseprice.match(/元\/课时\=C2\:(\S+?)\+陪驾\=/),D=t.editData.tmpcourseprice.match(/\+陪驾\=C1\:\d+元\/课时\=C2\:(\S+?)$/);t.tmpcoursepriceFormat.c1.base=v[1],t.tmpcoursepriceFormat.c1.drive=f[1],t.tmpcoursepriceFormat.c2.base=h[1],t.tmpcoursepriceFormat.c2.drive=D[1];for(var b=t.editData.tmpstandard.split("+"),i=0;i<b.length;i++)t.tmpstandardFormat+="<p>"+b[i]+"</p>";for(var F=t.editData.tmpservice.split("+"),i=0;i<F.length;i++)t.tmpserviceFormat+="<p>"+F[i]+"</p>"}}),t.getSignUpPackEditData=function(){$.AJAX({type:"get",url:config.basePath+"ept/view",data:{ttid:t.ttid},success:function(e){t.data=JSON.parse(e.result.pageData),t.editData=t.data,t.$apply()}})},t.getSignUpPackEditData(),t.autoFormItemPriceHTML="",t.autoFormItemPriceTPL='<div class="item-auto-item form-group row"><div class="item-auto-label col-lg-2 col-md-2 col-sm-3"><div class="z-ico-del" ng-click="zItemDel($event)">X</div>项目费用</div><div class="col-lg-5 col-md-7 col-sm-6"><input type="text" class="form-control item-auto-text1" placeholder="请填写项目名称" value=""></div><div class="col-lg-3 col-md-3 col-sm-3"><div class="form-group item-auto-text2"><div class="input-group"><input type="text" class="form-control" placeholder="项目金额" value=""><span class="input-group-addon">元</span></div></div></div></div>',t.zItemDel=function(t){$(t.target).parent(".item-auto-label").parent(".item-auto-item").slideUp("normal").remove()},t.zItemAdd=function(a){$(a.target).parents(".row").before(e(t.autoFormItemPriceTPL)(t))},t.packItemToggle=function(t){var e=$(t.target).html();"-"==e?$(t.target).html("+").parent("h2.z-toggle-h2").next("div").slideUp():"+"==e?$(t.target).html("-").parent("h2.z-toggle-h2").next("div").slideDown():alert("请注意ICO的+号和-号")},t.removeExistImg=function(t){$(t.target).parent(".form-exist-img-wrap").remove()}}]).filter("to_trusted",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]);