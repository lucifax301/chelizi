var app=angular.module("app",["ngFilter"]);app.controller("CarDetails",["$scope",function(a){function t(t){switch(t){case 0:a.getDataList();break;case 1:a.getCarLogs()}}function e(t){var e={url:config.basePath+"order/batch",data:{pageNo:t,pageSize:parseInt(a.pageSize),carId:a.carId,orderId:a.orderId}};return e}function n(a){var t={url:config.basePath+"logCommon/batch",data:{pageNo:a,pageSize:10,menuId:4,relateId:getQueryString("carId")}};return t}a.defaultPage=location.hash.substring(2)||1,a.pageSize=10,a.index=0,a.tableSwitch=function(e){a.index=tabPageDetails(e),win.showLoading(),location.hash="##1",t(a.index)},window.onhashchange=function(){win.showLoading(),a.defaultPage=location.hash.substring(2)||1,t(a.index)},a.getStudentData=function(){$.AJAX({type:"get",url:config.basePath+"car/view",data:{carId:getQueryString("carId")},success:function(t){a.carDetails=JSON.parse(t.result.car),a.carId=a.carDetails.carId,a.getDataList(),a.$apply()}})},a.getStudentData(),a.defaultPage=1,a.pageSize=10,a.orderId="",a.getDataList=function(){var t=e(a.defaultPage);$.AJAX({type:"get",url:t.url,data:t.data,success:function(t){var e=getListData(t);a.datas=e.dataList,a.$apply(),topLongText(),new Page({parent:$("#copot-page"),nowPage:a.defaultPage,pageSize:a.pageSize,totalCount:e.total})}})},a.getDataForPage=function(){win.showLoading(),a.getDataList()},a.getDataForSearch=function(){win.showLoading(),a.getDataList()},a.getCarLogs=function(){var t=n(a.defaultPage);$.AJAX({type:"get",url:t.url,data:t.data,success:function(t){var e=getListData(t);a.carLogs=e.dataList,a.$apply(),new Page({parent:$("#log-page"),nowPage:a.defaultPage,pageSize:a.pageSize,totalCount:e.total})}})}}]);