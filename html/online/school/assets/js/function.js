function errorMessage(e){$("#common-error").html('<span class="ion-close-circled"> '+e+"</span>")}function setIframelS(e){openSrc(e);var a=$(e).attr("src"),i=localStorage.getItem("school-iframeSrc");i?-1==i.indexOf(a)&&localStorage.setItem("school-iframeSrc",a):localStorage.setItem("school-iframeSrc",a)}function loginOut(){$.AJAX({type:"post",url:config.basePath+"login/logout",success:function(e){localStorage.setItem("school-username",""),window.location.href=startConfig.bathUrl+config.loginUrl}})}function openSrc(){var e=$("#admin-nav div");e.each(function(a){e.eq(a).attr("src")&&window.location.href.indexOf(e.eq(a).attr("src").match(/\b[\w_-]+/)[0])>-1&&(e.removeClass("active"),e.eq(a).addClass("active").parents("li").find("div").eq(0).addClass("active"),e.eq(a).parents("li").parents("li").parents("li")[0]?(e.eq(a).parents("li").find("ul").slideDown("fast"),e.eq(a).parents("li").find("i").attr("class","t-i ion-ios-arrow-down")):(e.eq(a).parents("li").find("ul.s-ac-menu").slideDown("fast"),e.eq(a).parents("li").find("i.s-i").attr("class","s-i ion-ios-arrow-down")))})}function getListData(e){return JSON.parse(e.result.pageData)}function scoreHtml(e){var a="";switch(e){case 0:a='<i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i>';break;case 1:a='<i class="ion-ios-star"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i>';break;case 2:a='<i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i>';break;case 3:a='<i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star-outline"></i><i class="ion-ios-star-outline"></i>';break;case 4:a='<i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star-outline"></i>';break;case 5:a='<i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star"></i><i class="ion-ios-star"></i>'}$("#pingji").html(a)}function tabPageDetails(e){if(e.target){var a=$(e.target).index();$(e.target).addClass("active").siblings().removeClass("active"),$("#order-table").children().eq(a).show().siblings().hide()}else{var a=e;$(".table-li").children().eq(a).addClass("active").siblings().removeClass("active"),$("#order-table").children().eq(a).show().siblings().hide()}return a}function getDataFromJson(e,a,i){for(var t=[],s=0,o=e.length;o>s;s++){t[s]?t[s].push(e[s]):t.push([e[s]]);for(var r=0,n=i.length;n>r;r++)t[s].push(i[r][a[s]])}return t}function topLongText(){var e=null,a=null;$(".layerBubble").mouseover(function(i){clearTimeout(e),clearTimeout(a);var t=$(this).attr("data-bubble"),s=18,o=60;$("#layer-bubble").length?($("#layer-bubble").show(),$("#layer-bubble font").text(t)):$("body").append('<div id="layer-bubble" style="left:'+(i.pageX-s)+"px;top:"+(i.pageY-o)+'px"><font>'+t+"</font><span></span></div>"),$(this).mousemove(function(e){e.pageX;$("#layer-bubble").css({left:e.pageX-s+"px",top:e.pageY-o+"px"})}),$("#layer-bubble").mouseover(function(i){clearTimeout(e),clearTimeout(a)})}),$(".layerBubble").mouseout(function(i){clearTimeout(e),clearTimeout(a),e=setTimeout(function(){$("#layer-bubble").hide()},500),$("#layer-bubble").mouseout(function(i){clearTimeout(e),clearTimeout(a),a=setTimeout(function(){$("#layer-bubble").hide()},500)})})}function createFileForm(e){var a='<div id="createFileHtml"><form enctype="multipart/form-data" target="fileIframeName" method="post" action="'+e.url+'" class="hidden">		<input type="file" name="filename" id="expInputFile">		</form><iframe class="hidden" name="fileIframeName" ></iframe></div>';$("#createFileHtml").length||$("body").append(a),$("#expInputFile").click(),$("#expInputFile").change(function(){e.callback()})}function cerateFileFormData(e){var a=e.filename?e.filename:"filename",i='<div id="createFileHtml" class="hidden">				<form enctype="multipart/form-data" id="uploadForm">					<input type="file" name="'+a+'" id="expInputFile"></div>				</form>';$("#createFileHtml").length||$("body").append(i),$("#expInputFile").click(),$("#expInputFile").change(function(){win.showLoading();var a=new FormData($("#uploadForm")[0]);if(e.data)for(var i in e.data)a.append(i,e.data[i]);$.FileAJAX({url:e.url,data:a,success:function(a){$("#createFileHtml").remove(),e.callback(a)},error:function(a){console.log(a),$("#createFileHtml").remove(),e.errorMsg?e.error(a):Layer.alertMor({width:400,height:230,type:"msg",type:"error",title:a.msg})}})})}function isFinaConfirm(e){for(var a=!1,i=[],t=0,s=e.datas.length;s>t;t++)for(var o=0,r=e.idList.length;r>o;o++)e.datas[t][e.id]==e.idList[o]&&i.push(e.datas[t]);for(var t=0,s=i.length;s>t;t++)checkIn(e.val,i[t][e.check],a)&&(a=!0);return a}function checkIn(e,a,i){for(var i=!1,t=0,s=e.length;s>t;t++)e[t]==a&&(i=!0);return i}function deleteJson(e,a){var i={};for(var t in e)t!=a&&(i[t]=e[t]);return i}function haveKeyInJson(e,a){var i=!1;for(var t in e)t==a&&(i=!0);return i}function clearAllActive(e){for(var a in e)e[a].parent().children().eq(0).addClass("active").siblings().removeClass("active")}function studentStateRes(e){for(var a={dataList:[],canChange:0,notChange:0},i=0,t=e.length;t>i;i++)a.dataList.push({applyexamAfter:e[i].applyexam+","+e[i].applystate,applystateAfter:e[i].reqApplyexam+","+e[i].reqApplystate,studentId:e[i].studentId,canReset:e[i].canReset,studentName:e[i].studentName}),e[i].canReset?a.notChange++:a.canChange++;return a}function getDataForKey(e){for(var a=[],i=0,t=e.datas.length;t>i;i++)for(var s=0,o=e.idList.length;o>s;s++)e.datas[i][e.id]==e.idList[s]&&a.push(e.datas[i]);return a}function getKeyArrFromData(e,a){for(var i=[],t=0,s=e.length;s>t;t++)i.push(e[t][a]);return i}function getDataForStudentConfig(e){for(var a=!1,i="",t=[],s=0,o=e.datas.length;o>s;s++){if(e.check.indexOf(",")>0){var r=e.check.split(",");i=e.datas[s][r[0]]+","+e.datas[s][r[1]]}else i=e.datas[s].check;var a=haveKeyInJson(e.checkData,i);if(!a)return t=[],e.callback(t),!1;for(var n in e.checkData)i==n&&(t=t.length?commonArrData(t,e.checkData[n]):e.checkData[n])}console.log(a),e.callback(t)}function commonArrData(e,a){for(var i=[],t=0,s=e.length;s>t;t++)for(var o=0,r=a.length;r>o;o++)a[o]==e[t]&&i.push(a[o]);return i}function schoolsAccountDetails(e){$.AJAX({type:"get",url:config.basePath+"school/queryAccount",data:{},success:function(a){e.callback(getListData(a))}})}function dataExportForIframe(e){var a=jsonToGetUrl(e.getSearchs);e.total>config.explTotal?Layer.confirm({width:300,height:160,title:config.explPrompt,header:"导出"},function(){$("#exproiframe").length?$("#exproiframe").attr("src",config.basePath+e.url+"?"+a):$("body").append('<iframe id="exproiframe" class="hide" src="'+config.basePath+e.url+"?"+a+'"></iframe>')}):$("#exproiframe").length?$("#exproiframe").attr("src",config.basePath+e.url+"?"+a):$("body").append('<iframe id="exproiframe" class="hide" src="'+config.basePath+e.url+"?"+a+'"></iframe>'),setTimeout(function(){$("#exproiframe").remove()},5e3)}