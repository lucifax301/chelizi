var app=angular.module("app",["ngFilter"]);app.controller("importStudentExamController",["$scope","$filter",function(t,e){win.hideLoading(),t.step=0,t.uuid="",t.importFile=function(){cerateFileFormData({url:config.basePath+"school/enroll/upload?type=2",callback:function(e){console.log(e),Layer.miss({width:250,height:90,title:"正在处理请稍候",time:36e5}),t.uuid=e.result.pageData;var a,i;clearInterval(a),i=600,a=setInterval(function(){return i--,i?void $.AJAX({url:config.basePath+"school/enroll/upload/uuid",type:"get",data:{uuid:t.uuid},success:function(e){var i=getListData(e);i&&(clearInterval(a),$(".PopLayer").remove(),t.total=i.total,t.valid=i.valid,t.headDesc=i.headDesc,t.uuid=i.uuid,t.tableNo=i.tableNo,t.datas=i.dataList,t.step=1,t.$apply())}}):(clearInterval(a),$(".PopLayer-miss").remove(),$(".PopLayer-mask").remove(),Layer.alert({width:400,height:150,type:"error",title:"读取失败，请检查上传资源"}),!1)},500)}})},t.comfirmImport=function(){Layer.confirm({width:320,height:160,title:"是否确认导入?",header:"确认导入"},function(){$.AJAX({url:config.basePath+"school/enroll/update/state",data:{uuid:t.uuid,state:1},success:function(e){getListData(e);t.step=2,t.$apply(),Layer.miss({width:200,height:100,title:"操作成功",closeMask:!0})}})})},t.cancelImport=function(){Layer.confirm({width:320,height:160,title:"是否放弃导入?",header:"取消导入"},function(){$.AJAX({url:config.basePath+"school/enroll/update/state",data:{uuid:t.uuid,state:2},success:function(e){t.step=0,t.$apply(),Layer.miss({width:250,height:90,title:"操作成功",closeMask:!0})}})})}}]);