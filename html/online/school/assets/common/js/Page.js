function Page(t){this.nowPage=parseInt(t.nowPage),this.parent=t.parent,this.call=t.callback,this.totalCount=t.totalCount,this.pageSize=t.pageSize,this.totalPage=Math.ceil(this.totalCount/this.pageSize),this.html="",this.type=t.type||1,this.setting=t.setting||{defaultPage:5,firstPageText:"首页",prevPageText:"上一页",nextPageText:"下一页",lastPageText:"最后一页"},this.centPage=Math.ceil(this.setting.defaultPage/2),this.init()}Page.prototype.init=function(){this.parent.html(""),this.totalPageText(),this.firstPage(),this.prevPageText(),this.everyPage(),this.nextPage(),this.lastPage(),this.pageSearch(),this.parent.append(this.html),this.callback()},Page.prototype.everyPage=function(){if(this.totalPage<=this.setting.defaultPage)for(var t=1;t<=this.totalPage;t++)this.nowPage==t?this.html+="<a href='#"+t+"' class='nowPage'>"+t+"</a>":this.html+="<a href='#"+t+"'>"+t+"</a>";else for(var t=1;t<=this.setting.defaultPage;t++){var a=this.nowPage-this.centPage+t,e=this.totalPage-this.setting.defaultPage+t;this.nowPage<this.centPage?this.nowPage==t?this.html+="<a href='#"+t+"' class='nowPage'>"+t+"</a>":this.html+="<a href='#"+t+"'>"+t+"</a>":this.nowPage>this.totalPage-this.centPage?this.setting.defaultPage-(this.totalPage-this.nowPage)==t?this.html+="<a href='#"+this.nowPage+"' class='nowPage'>"+this.nowPage+"</a>":this.html+="<a href='#"+e+"'>"+e+"</a>":this.centPage==t?this.html+="<a href='#"+a+"' class='nowPage'>"+a+"</a>":this.html+="<a href='#"+a+"'>"+a+"</a>"}},Page.prototype.firstPage=function(){this.nowPage>this.centPage&&this.totalPage>=this.setting.defaultPage+1&&(this.html+="<a href='#1'>"+this.setting.firstPageText+"</a>")},Page.prototype.prevPageText=function(){this.nowPage>=2&&(this.html+="<a href='#"+(this.nowPage-1)+"'>"+this.setting.prevPageText+"</a>")},Page.prototype.nextPage=function(){this.totalPage-this.nowPage>=1&&(this.html+="<a href='#"+(this.nowPage+1)+"'>"+this.setting.nextPageText+"</a>")},Page.prototype.lastPage=function(){this.totalPage-this.nowPage>=this.centPage&&this.totalPage>this.setting.defaultPage&&(this.html+="<a href='#"+this.totalPage+"'>"+this.setting.lastPageText+"</a>")},Page.prototype.totalPageText=function(){this.html+="<span class='page-msg'>共 <span>"+this.totalCount+"</span> 条记录  共<span>"+this.totalPage+"</span>页</span>&nbsp;&nbsp;&nbsp;&nbsp;"},Page.prototype.pageSearch=function(){this.totalPage>this.setting.defaultPage&&(this.html+="<span class='Page-search-span'>跳转到<input type='text' id='Page-search'>页</span><button id='pageSearch'>确定</button>")},Page.prototype.callback=function(){var t=this;1==this.type?(this.parent.find("a").bind("click",function(){var t=$(this).attr("href").substring(1);return location.hash="##"+t,!1}),this.parent.find("#pageSearch").click(function(){var a=t.parent.find("#Page-search").val();location.hash="##"+a,parseInt(a)>0&&t.getPage(a)})):2==this.type&&(this.parent.find("a").bind("click",function(){var a=$(this).attr("href").substring(1);return t.getPage(a),!1}),this.parent.find("#pageSearch").click(function(){var a=t.parent.find("#Page-search").val();parseInt(a)>0&&t.getPage(a)}))},Page.prototype.getPage=function(t){win.showLoading(),this.parent.html(""),new Page({parent:this.parent,nowPage:t,type:this.type,totalPage:this.totalPage,pageSize:this.pageSize,totalCount:this.totalCount,setting:this.setting,callback:this.call}),this.call(t,this.totalPage)};